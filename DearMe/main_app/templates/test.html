{% extends 'base.html' %} 
{% load static %} 
{% block head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<link rel="stylesheet" href="{% static 'css/signup.css' %}" />
<style>
  .input-with-icon {
    position: relative;
    display: inline-block;
  }
  .input-with-icon input {
    padding-right: 30px; /* space for the icon */
  }
  .calendar-icon {
    position: absolute;
    right: 8px;
    top: 50%;
    transform: translateY(-50%);
    pointer-events: none;
    font-size: 1.2em;
    color: #888;
  }
</style>
{% endblock %} 

{% block content %}
<div class="page-header">
  <h1>Sign Up</h1>
</div>

{% if error_message %}
  <p class="red-text">{{ error_message }}</p>
{% endif %}

<form action="" method="post" class="form-container" autocomplete="off">
  {% csrf_token %}
  <table>
    <!-- Loop through all fields except birthday and password fields -->
    {% for field in form %}
      {% if field.name not in "birthday password1 password2" %}
        <tr>
          <td>{{ field.label_tag }}</td>
          <td>{{ field }}</td>
        </tr>
      {% endif %}
    {% endfor %}

    <!-- Birthday field -->
    <tr>
      <td>{{ form.birthday.label_tag }}</td>
      <td>
        <div class="input-with-icon">
          {{ form.birthday }}
          <span class="calendar-icon">ðŸ“…</span>
        </div>
      </td>
    </tr>

    <!-- Password fields -->
    <tr>
      <td>{{ form.password1.label_tag }}</td>
      <td>{{ form.password1 }}</td>
    </tr>
    <tr>
      <td>{{ form.password2.label_tag }}</td>
      <td>{{ form.password2 }}</td>
    </tr>
  </table>

  <button type="submit" class="btn submit">Submit!</button>
</form>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    flatpickr("#id_birthday", {
      dateFormat: "Y-m-d",
      minDate: "1900-01-01",
      maxDate: "2100-12-31",
      altInput: true,
      altFormat: "F j, Y",
      allowInput: true
    });
  });
</script>
{% endblock %}
